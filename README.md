# 免费 AI API 调用工具

这是一个模拟免费 AI API 调用的自动化工具，通过网页自动化技术提供类似 API 的调用体验，让用户能够免费使用 AI 服务。

## 功能特性

- 🆓 **免费 AI 调用** - 通过网页自动化实现免费 AI 服务调用
- 🔌 **API 式接口** - 简单的文件操作模拟 API 调用体验
- 🤖 **智能交互** - 自动处理登录、输入、发送、等待回复等复杂流程
- 💾 **结果保存** - 自动保存 AI 回复到文件，便于后续处理
- 🔄 **稳定性保障** - 智能检测机制确保回复完整获取
- 📝 **简单易用** - 只需编辑文本文件即可调用 AI 服务

## 文件结构

```
.
├── api_free.py          # 核心自动化脚本
├── login.py             # 登录管理脚本
├── extract_reply.py     # 回复内容提取脚本
├── index.py             # 主入口文件
├── que.txt              # 用户问题输入文件
├── ans.txt              # AI 回复输出文件
├── webpage.html         # 网页 HTML 保存文件
├── auth_state.json      # 登录状态保存文件
└── README.md            # 项目说明文档
```

## 核心概念

这个工具将复杂的网页交互过程封装成简单的 API 式调用：

- **输入**：在 `que.txt` 文件中写入问题（类似 API 请求）
- **处理**：运行程序自动完成所有交互流程
- **输出**：在 `ans.txt` 中获取 AI 回复（类似 API 响应）

## 安装和使用

### 环境要求

- Python 3.7+
- Playwright 浏览器自动化框架

### 安装依赖

```bash
pip install playwright
playwright install chromium
```

### API 调用方法

1. **准备请求**：在 `que.txt` 文件中写入你想要询问 AI 的问题

2. **执行调用**：
   ```bash
   python index.py
   ```

3. **获取响应**：
   - `ans.txt` - AI 的完整回复内容（主要输出）
   - `webpage.html` - 完整的网页 HTML（调试用）

### 高级用法

- **仅登录**（首次使用或登录失效时）：
  ```bash
  python login.py
  ```

- **仅提取回复**（从已有 HTML 中提取）：
  ```bash
  python extract_reply.py
  ```

## 工作原理

### API 调用流程

1. **请求处理**：读取 `que.txt` 中的用户问题
2. **会话管理**：自动处理登录状态和会话维持
3. **智能交互**：在网页中自动输入问题并发送
4. **响应等待**：智能检测 AI 回复完成状态
5. **结果提取**：从网页中提取纯文本回复并保存

### 技术实现

- **网页自动化**：使用 Playwright 模拟真实用户操作
- **智能检测**：基于内容稳定性和交互状态判断流程进度
- **错误处理**：自动处理网络异常和页面状态变化
- **会话持久化**：保存登录状态避免重复登录

## API 接口说明

### 请求格式

在 `que.txt` 文件中写入任意文本问题，例如：
```
请帮我写一篇关于人工智能的短文
```

### 响应格式

- `ans.txt`：AI 的完整回复内容（主要 API 响应）
- `webpage.html`：原始网页 HTML（用于调试和分析）

### 状态管理

- `auth_state.json`：自动管理的登录状态信息

## 使用优势

- 💰 **完全免费** - 无需支付 API 调用费用
- 🚀 **简单易用** - 文件操作替代复杂 API 调用
- 🔒 **隐私保护** - 本地运行，数据不经过第三方服务器
- ⚡ **稳定可靠** - 智能错误处理和重试机制

## 注意事项

- 首次使用需要登录目标网站，后续调用自动维持会话
- 确保网络连接稳定，避免调用过程中断
- 程序会自动处理各种异常情况
- 如遇登录问题，可删除 `auth_state.json` 重新登录

## 故障排除

如果 API 调用失败，可以尝试：

1. 删除 `auth_state.json` 文件重新建立会话
2. 检查网络连接是否稳定
3. 确认目标网站可正常访问
4. 查看程序输出的错误信息

## 应用场景

- 📝 **内容创作** - 文章写作、创意生成
- 💬 **对话交流** - 智能问答、聊天对话  
- 🎓 **学习辅助** - 知识问答、学习指导
- 🔧 **开发测试** - AI 功能集成测试

## 许可证

本项目仅供学习和研究使用，请遵守相关网站的使用条款。
